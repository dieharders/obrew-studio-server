<link rel="stylesheet" href="main.css" />
<script type="text/javascript" src="main.js"></script>

<span class="header">
  <!-- Version banner -->
  <p id="version">Version {{?}}</p>
  <!-- Message banner -->
  <div class="messageBanner">
    <p id="messageBannerContent"></p>
  </div>
</span>

<div class="content">
  <!-- Logo -->
  <div class="bg-image-container">
    <div class="bg-image"></div>
  </div>

  <!-- Title -->
  <h1>Welcome to Obrew Studio!</h1>
  <p>Startup the server to begin.</p>
  <!-- Update notification -->
  <div id="updateMessageContainer">
    <p id="updateVersion">New update available:</p>
    <p>Download: <a id="updateLink" href="https://www.openbrewai.com" target="_blank">here</a></p>
    <p id="updateAsset">Size:</p>
  </div>

  <!-- Connection Options -->
  <button class="btn grey" onclick="toggleConnections()">Connection Options</button>
  <div id="connContainer" data-attr="closed">
    <p>Edit the config below to start the server.</p>
    <form action="" class="formOptions">
      <!-- Custom Server -->
      <div class="inputContainer">
        <label for="host">Host:</label>
        <input type="text" id="host" name="host" value="" placeholder="{{0.0.0.0}}" />
      </div>
      <div class="inputContainer">
        <label for="port">Port:</label>
        <input type="number" id="port" name="port" value="" placeholder="{{8008}}" />
      </div>
      <div>
        <!-- Supported Apps List -->
        <div class="appsListContainer">
          <h3>Available Apps</h3>
          <div class="appCards" id="appCards">
            <!-- Studio App Card -->
            <div
              class="appCard"
              data-webui="http://"
              data-name="Studio"
              onclick="selectAppCard(this)"
            >
              <div class="appCardHeader">
                <h4>Obrew Studio</h4>
              </div>
              <p class="appCardDescription">
                The main Obrew Studio interface for AI chat, agents, and workflows.
              </p>
              <button type="button" class="btn appCardBtn" onclick="selectApp(this, event)">
                Launch Studio
              </button>
            </div>
            <!-- FileBuff App Card -->
            <div
              class="appCard"
              data-webui="https://filebuff.openbrew.ai"
              data-name="FileBuff"
              onclick="selectAppCard(this)"
            >
              <div class="appCardHeader">
                <h4>FileBuff</h4>
              </div>
              <p class="appCardDescription">
                File management and knowledge base interface for your documents.
              </p>
              <button type="button" class="btn appCardBtn" onclick="selectApp(this, event)">
                Launch FileBuff
              </button>
            </div>
          </div>
        </div>
        <!-- Manual Entry Toggle -->
        <button type="button" class="btn grey" id="manualEntryBtn" onclick="toggleManualEntry()">
          Enter Manually
        </button>
        <!-- WebUI Input -->
        <div class="inputContainer" id="webuiContainer" data-attr="closed">
          <label for="webui">WebUI:</label>
          <input
            type="text"
            id="webui"
            name="webui"
            value=""
            placeholder="{{http://localhost:3000}}"
          />
        </div>
      </div>
    </form>
  </div>

  <!-- Advanced Connection Options -->
  <button class="btn grey" onclick="toggleAdvanced()">Advanced Options</button>
  <div id="advContainer" data-attr="closed">
    <p>Scan the code with your mobile device to connect to Obrew running on this device.</p>
    <div class="remote">
      <h3>Remote Host</h3>
      <!-- Only show if data exists -->
      <p id="qr_link">{{remote_url}}:{{port}}</p>
      <img id="qrcode" data-attr="none" src="" alt="qr code for {{remote_url}}:{{port}}" />
    </div>
    <h3>API Docs</h3>
    <a class="docs-link" href="{{local_url}}:{{port}}/docs" target="_blank">
      {{local_url}}:{{port}}/docs
    </a>
  </div>

  <!-- Button Menu -->
  <div class="menuContainer">
    <ul class="menu">
      <button id="startBtn" class="btn" onclick="startServer()">Start</button>
      <a id="settingsBtn" class="btn" href="/settings.html" draggable="false" data-link>Settings</a>
    </ul>
  </div>
</div>
